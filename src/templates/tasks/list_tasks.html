{% extends "base.html" %}
{% block content %}
<script type=text/javascript>
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>
<div class="container form-width">
    <h1 class="text-center"> <i class="fa fa-list-alt"></i> Tasks </h1>
    {% if message is defined %}
    <h4 class="text-center"><span class="label label-danger">{{ message }}</span></h4>
    {% endif %}
</div>
{% if folder_id %}
<div class="panel panel-default">
    <div class="panel-body">
        <div class="col-md-12">
            <a href="/user/folder/task/add/{{folder_id}}">
                <button class="btn btn-success">Add Task</button>
            </a>
            <button type="button" class="btn btn-danger btn" data-toggle="modal" data-target="#deletionModal">
                Delete this folder
            </button>

        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="deletionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="deletionModalLabel">Deletion confirmation</h4>
            </div>
            <div class="modal-body">
                You are about to delete this whole thing; are you sure?
            </div>
            <div class="modal-footer">
                <a type="button" class="label label-default" data-dismiss="modal">I changed my mind, cancel deletion</a>
                <a class="label label-danger" href="/user/folder/delete/{{folder_id}}">I'am sure delete this folder</a>

            </div>
        </div>
    </div>
</div>
{% endif %}

{% if tasks|length > 0 %}
{% for task in tasks | sort(attribute="due_date") %}
<div class="col-md-12">

<div class="row">

    {% if task.is_done == true %}

    <span role="button" id="{{task._id}}" class="inline-display task glyphicon glyphicon-check"></span>

    <a id= "a_{{task._id}}" href="/user/folder/task/detail/{{task._id}}" class="inline-display strikethrough"><h4 id="task-title">{{ task.title }}</h4></a>

    <p class="inline-display" id="task-date">|due date: <i class="fa fa-clock-o"></i> {{ task.due_date }}</p>

    {% else %}

    <span role="button" id="{{task._id}}" class="inline-display task glyphicon glyphicon-unchecked "></span>

    <a class="inline-display" id= "a_{{task._id}}" href="/user/folder/task/detail/{{task._id}}" ><h4>{{ task.title }}</h4></a>

    <p class="inline-display"> |due date: <i class="fa fa-clock-o"></i> {{ task.due_date }}</p>

    {% endif%}

</div>
    <hr>
</div>


{% endfor %}

{% else %}
<h4>You did not add any tasks yet; Let's get productive. add one now...</h4>
{% endif %}


{% endblock %}
<script type=text/javascript>

</script>